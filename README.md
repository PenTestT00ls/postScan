# Web服务探测工具 (Web Service Finder)

一个功能强大的Web服务探测工具，用于扫描IP地址的开放端口，检测HTTP/HTTPS服务，提取网页标题并保存扫描结果。

## 功能特性

- 🔍 **智能端口扫描**：支持单个端口、端口列表和端口范围扫描
- 🌐 **双协议检测**：自动检测HTTP和HTTPS服务
- 📄 **标题提取**：从HTML页面提取<title>标签内容
- 📊 **状态码显示**：显示HTTP响应状态码
- ⚡ **多线程支持**：可配置线程数，提高扫描效率
- 💾 **自动保存**：扫描结果自动保存到文件
- 🚦 **优雅退出**：支持Ctrl+C安全中断扫描
- 📝 **详细报告**：生成包含时间戳的完整扫描报告

## 安装要求

### Python版本要求
- Python 3.6 或更高版本

### 依赖项
无需额外安装依赖，所有模块均为Python标准库：
- `socket`
- `ssl`
- `threading`
- `queue`
- `argparse`
- `urllib`
- `html.parser`
- `ipaddress`

## 使用方法

### 基本语法
```bash
python webSerFind.py <目标IP> [选项]
```

### 命令行选项

| 参数 | 简写 | 默认值 | 描述 |
|------|------|---------|------|
| `--ports` | `-p` | `80,443,8080,8000,8888,3000,5000,7000,9000` | 要扫描的端口（支持逗号分隔和范围） |
| `--threads` | `-t` | `20` | 并发线程数 |
| `--timeout` |  | `2` | 连接超时时间（秒） |
| `--output` | `-o` | 自动生成 | 输出文件名 |
| `--help` | `-h` |  | 显示帮助信息 |

### 端口格式说明

1. **单个端口**：`80`
2. **多个端口**：`80,443,8080`
3. **端口范围**：`1-1000`
4. **混合格式**：`80,443,8000-9000,3000`

### 使用示例

#### 示例1：基本扫描
```bash
python webSerFind.py 192.168.1.1
```
扫描常用Web端口（80,443,8080等），使用20个线程，2秒超时。

#### 示例2：指定端口范围
```bash
python webSerFind.py 192.168.1.1 -p 1-1000
```
扫描1-1000端口范围内的Web服务。

#### 示例3：自定义线程和超时
```bash
python webSerFind.py 192.168.1.1 -p 80,443,8080 -t 50 --timeout 3
```
使用50个线程，3秒超时扫描指定端口。

#### 示例4：完整端口扫描
```bash
python webSerFind.py 192.168.1.1 -p 1-65535 -t 100 --timeout 2
```
扫描所有端口（1-65535），使用100个线程。

#### 示例5：自定义输出文件
```bash
python webSerFind.py 192.168.1.1 -o scan_results.txt
```
将结果保存到指定的文件。

## 输出示例

### 控制台输出
```
==================================================
Web服务探测工具 v1.0
==================================================
[*] 目标IP: 192.168.1.1
[*] 扫描端口: 10 个
[*] 线程数: 20
[*] 超时时间: 2秒
[*] 开始扫描... (按 Ctrl+C 停止)
[*] 结果将保存到: web_scan_192.168.1.1_20231201_143022.txt
==================================================

HTTP:  http://192.168.1.1:80
      Title: Welcome to nginx! (Code: 200)
--------------------------------------------------
HTTPS: https://192.168.1.1:443
      Title: Secure Login Page (Code: 200)
--------------------------------------------------
HTTP:  http://192.168.1.1:8080
      Title: Jenkins (Code: 200)
--------------------------------------------------

==================================================
扫描完成!
发现HTTP服务: 3 个
发现HTTPS服务: 1 个
总耗时: 12.34 秒
结果已保存到: web_scan_192.168.1.1_20231201_143022.txt
```

### 输出文件内容
```
Web服务扫描报告
目标IP: 192.168.1.1
开始时间: 2023-12-01 14:30:22
扫描端口数: 10
线程数: 20
超时时间: 2秒
==================================================

[2023-12-01 14:30:24]
HTTP:  http://192.168.1.1:80
      Title: Welcome to nginx! (Code: 200)
--------------------------------------------------
[2023-12-01 14:30:25]
HTTPS: https://192.168.1.1:443
      Title: Secure Login Page (Code: 200)
--------------------------------------------------

==================================================
扫描摘要:
发现HTTP服务: 3 个
发现HTTPS服务: 1 个
结束时间: 2023-12-01 14:30:34
总耗时: 12.34 秒
```

## 文件结构

```
webSerFind.py                 # 主程序文件
web_scan_<IP>_<时间戳>.txt    # 自动生成的扫描结果文件
```

## 技术细节

### 工作流程
1. **参数解析**：解析命令行参数和目标IP
2. **端口队列**：根据指定的端口范围创建扫描队列
3. **多线程扫描**：
   - 检查端口是否开放
   - 尝试HTTP连接
   - 尝试HTTPS连接（忽略证书验证）
   - 提取HTML标题
4. **结果处理**：实时显示结果并保存到文件
5. **报告生成**：扫描完成后生成摘要报告

### 错误处理
- 无效IP地址验证
- 端口范围合法性检查
- 网络超时处理
- SSL证书异常处理
- 用户中断（Ctrl+C）安全处理

## 性能优化建议

1. **线程数**：根据网络状况和系统资源调整线程数
   - 局域网：50-100线程
   - 互联网：20-50线程
   - 高延迟网络：10-20线程

2. **超时设置**：
   - 局域网：1-2秒
   - 互联网：2-3秒
   - 高延迟网络：3-5秒

3. **端口范围**：
   - 常规扫描：常用Web端口（80,443,8080,8000等）
   - 全面扫描：1-10000端口
   - 深度扫描：1-65535端口（耗时较长）

## 注意事项

⚠️ **重要提示**

1. **法律合规**：
   - 仅在您拥有权限的系统上使用本工具
   - 遵守当地法律法规和网络安全政策
   - 未经授权扫描他人系统可能是违法的

2. **网络影响**：
   - 大量并发连接可能对目标系统造成负载
   - 建议在非高峰时段进行扫描
   - 设置合理的线程数和超时时间

3. **结果准确性**：
   - 某些服务可能配置了访问限制
   - HTTPS证书错误不影响服务检测
   - 标题提取依赖于页面编码

## 故障排除

### 常见问题

1. **"无效的IP地址"错误**
   - 检查IP地址格式是否正确
   - 确保输入的是有效的IPv4地址

2. **扫描速度过慢**
   - 减少线程数
   - 降低超时时间
   - 减少端口范围

3. **无法连接目标**
   - 检查网络连接
   - 验证目标IP是否可达
   - 检查防火墙设置

4. **没有发现服务**
   - 目标可能没有运行Web服务
   - 尝试扩大端口范围
   - 检查目标防火墙配置

### 调试模式
如需调试，可以修改源码添加详细日志输出。

## 更新日志

### v1.0 (当前版本)
- 初始版本发布
- 支持端口范围扫描
- 支持HTTP/HTTPS双协议检测
- 自动标题提取
- 多线程支持
- 结果自动保存

## 贡献指南

欢迎提交Issue和Pull Request来改进这个工具。

## 许可证

本项目采用MIT许可证。详见LICENSE文件（如需添加）。

## 免责声明

本工具仅供学习和授权的安全测试使用。使用者应对其行为负责，作者不对任何滥用行为承担责任。

---

**作者**: Zerlk  
**版本**: 1.0  
**最后更新**: 20260113
