一个高性能的Python端口扫描工具，支持多线程扫描和灵活的端口范围配置。

## 功能特性

- 🚀 **多线程扫描**：使用线程池实现高速端口检测
- 🔧 **灵活参数**：支持IP地址、端口范围、线程数等自定义配置
- ⚡ **Ctrl+C优雅退出**：支持中断信号，安全停止扫描过程
- 📊 **实时反馈**：实时显示发现的开放端口和服务信息
- 💾 **结果保存**：自动将扫描结果保存到文件
- 🎯 **服务识别**：尝试识别开放端口对应的网络服务

## 安装要求

```bash
# 需要Python 3.6或更高版本
python --version

# 安装依赖（本脚本仅使用Python标准库，无需额外安装）
# 确保socket、threading、argparse等模块可用
```

## 使用方法

### 基本扫描
```bash
python portscan.py 192.168.1.1
```

### 指定端口范围
```bash
# 连续范围
python portscan.py 192.168.1.1 -p 1-1000

# 离散端口
python portscan.py example.com -p 80,443,22,21

# 混合格式
python portscan.py 192.168.1.1 -p 22-25,80,443,8000-8080
```

### 高级选项
```bash
# 自定义线程数和超时时间
python portscan.py 192.168.1.1 -p 1-5000 -t 200 -T 0.5

# 扫描特定服务端口
python portscan.py 192.168.1.1 -p 21,22,23,25,80,443,8080

# 详细模式
python portscan.py 192.168.1.1 -v
```

## 参数说明

| 参数 | 简写 | 默认值 | 说明 |
|------|------|--------|------|
| `--ports` | `-p` | `1-1000` | 端口范围（支持多种格式） |
| `--threads` | `-t` | `100` | 并发线程数 |
| `--timeout` | `-T` | `1.0` | 连接超时时间（秒） |
| `--verbose` | `-v` | `False` | 详细输出模式 |

## 端口范围格式支持

- **连续范围**：`1-1000`（扫描端口1到1000）
- **离散端口**：`80,443,8080`（扫描指定端口）
- **混合格式**：`22-25,80,443,8000-8080`（组合使用）

## 输出示例

```bash
[*] 开始扫描: 192.168.1.1 (192.168.1.1)
[*] 端口范围: 1-1000 (1000 个端口)
[*] 线程数: 100
[*] 超时时间: 1.0秒
[*] 开始时间: 2025-01-13 14:30:00
--------------------------------------------------
[+] 端口 22/tcp 开放 - 服务: ssh
[+] 端口 80/tcp 开放 - 服务: http
[+] 端口 443/tcp 开放 - 服务: https

[*] 扫描完成!
[*] 扫描耗时: 15.23 秒
[*] 扫描速率: 65.66 端口/秒
[+] 发现的开放端口 (3 个):
    22/tcp - ssh
    80/tcp - http
    443/tcp - https
```

## 技术实现

### 扫描原理
使用TCP全连接扫描（TCP Connect Scan），通过尝试与目标端口建立完整的TCP三次握手来判断端口状态。

### 多线程架构
采用线程池技术，将端口列表分成多个块，每个线程处理一个端口块，提高扫描效率。

### 错误处理
- 连接超时处理
- 网络异常捕获
- 信号中断处理（Ctrl+C）

## 注意事项

1. **合法使用**：请仅在获得授权的情况下扫描目标网络
2. **性能考虑**：过多的线程数可能被目标系统视为攻击行为
3. **网络环境**：扫描速度受网络条件和目标系统限制影响
4. **防火墙**：结果可能受中间防火墙策略影响

## 免责声明

本工具仅用于教育学习和授权安全测试目的。使用者应对自己的行为负责，作者不承担任何因滥用此工具而产生的法律责任。

---


**提示**：扫描过程中按Ctrl+C可以安全停止扫描并显示当前结果。

